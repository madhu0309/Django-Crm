{% load staticfiles %}
{% load compress %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Django CRM</title>
    <!-- Bootstrap core CSS -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.0/css/bootstrap.min.css" />
    <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" />
    <!-- Custom styling plus plugins -->
    {% compress css %}
    <link href="{% static 'css/main.scss' %}" type="text/x-scss" rel="stylesheet">
    {% endcompress %}
    {% block extralinks %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    {% endblock %}
  </head>
  <body class="login_register_body">
    <div class="container">
      <div class="row marl justify-content-center login_row">
        <div class="col-md-6 col-lg-6 col-xl-4">
          <div class="login_block">
            <div class="login_form_block">
              <div class="welcome">Django CRM</div>
              <form id="login_form" method="POST" action="">
                <div class="form-group">
                  <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Email" name="email">
                   <p id="email_error" style="color:red"></p>
                </div>
                <div class="form-group">
                  <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" name="password">
                  <p id="password_error" style="color:red"></p>
                </div>
                <div class="forgot">Forgot Password <a href="{% url "common:password_reset" %}">Click Here?</a></div>
                {% if error %}
                <p class="error">{{ message }}</p>
                {% endif %}
                <button type="submit" class="btn btn-danger">Login</button>
                &nbsp;
                {% if ENABLE_GOOGLE_LOGIN and GP_CLIENT_SECRET and GP_CLIENT_ID %}
                <a href="{% url 'common:google_login' %}" class="btn btn-primary">Google Login</a>
                {% endif %}
              </form>
              <div class="credentials">
                <span class="heading">Test credentials to Login</span>
                <span>Email: <b>admin@micropyramid.com</b></span><br>
                <span>Password:<b> admin</b>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
    var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    $( document ).ready(function() {
    $("#login_form").on("submit", function(e){
    e.preventDefault();
    email = $("#exampleInputEmail1").val();
    pass = $("#exampleInputPassword1").val();
    $(".error").text("")
    $("#email_error").text("")
    $("#password_error").text("")
    if (regex.test(email) && pass.length > 3){
        this.submit()
        }
    if(email.length ==0){
      $("#email_error").text("Please enter the email ")
    }
    if( email.length >0 && !(regex.test(email))){
      $("#email_error").text(" Please enter a Valid email ")
    }
    if (pass.length < 4){
      $("#password_error").text("Password should be atleast 4 character's") 
      }
    });
    });
    </script>
  </body>
</html>
