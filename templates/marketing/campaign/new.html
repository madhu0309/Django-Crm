{% extends 'marketing/base.html' %}
{% load staticfiles %}
{% load paginate %}
{% block content %}
<ul class="list-group side_menu mb-3">
  <li class="list-group-item d-flex justify-content-between">
    <div class="item">
      <h6 class="heading"><i class="fas fa-address-book"></i> Contacts</h6>
      <ul>
        <li><a href="/cl/list"><i class="fas fa-bars"></i> Contact List <span class="float-right">202</span></a></li>
        <li><a href=""  class="active"> <i class="fas fa-plus"></i>Create New Contact</a></li>
      </ul>
    </div>
  </li>
  <li class="list-group-item d-flex justify-content-between">
    <div class="item">
      <h6 class="heading"><i class="fas fa-envelope"></i> Email Templates </h6>
      <ul>
        <li><a href="#"><i class="fas fa-bars"></i> Email Templates List <span class="float-right">15</span></a></li>
        <li><a href="#"><i class="fas fa-plus"></i>Create New Email Template</a></li>
      </ul>
    </div>
  </li>
  <li class="list-group-item d-flex justify-content-between">
    <div class="item">
      <h6 class="heading"><i class="fas fa-bullhorn"></i> Campigns</h6>
      <ul>
        <li><a href="#"><i class="fas fa-bars"></i> Campaigns List <span class="float-right">54</span></a></li>
        <li><a href="#"><i class="fas fa-plus"></i>Create New Campaign</a></li>
      </ul>
    </div>
  </li>
</ul>
<div class="marketing_pages">
	<div class="row marl">
	  <div class="col-md-12">
	    <form id="add_form" method="POST" action='' novalidate>
		  <div class="overview_form_block row marl justify-content-center">
		    <div class="col-md-9">
		      <div class="card">
		        <div class="card-body">
		          <div class="card-title text-center">
		            {% if contact_obj %}EDIT{% else %}CREATE{% endif %} CONTACT
		          </div>
		          <div class="row marl no-gutters justify-content-center">
		            <div class="col-md-4">
		              <div class="filter_col col-md-12">
		                <div class="form-group">
		                  <label for="exampleInputEmail1" class="required">Name{% if contact_form.first_name.field.required %}<span class="error">*</span>{% endif %}</label>
		                  <div class="row">
		                    <div class="filter_col col-md-6">
		                      {{ contact_form.first_name }}
		                      <span class="error">{{ contact_form.first_name.errors }}</span>
		                    </div>
		                    <div class="filter_col col-md-6">
		                      {{ contact_form.last_name }}
		                      <span class="error">{{ contact_form.last_name.errors }}</span>
		                    </div>
		                  </div>
		                </div>
		              </div>
		              <div class="filter_col col-md-12">
		                <div class="form-group">
		                  <label for="exampleInputEmail1">Account{% if contact_form.account.field.required %}<span class="error">*</span>{% endif %}</label>
		                  {% if account %}
		                  <select name="account" placeholder="Account" class="form-control" id="id_account" readonly>
		                      <option value="{{account.id}}" selected="">{{account.name}}</option>
		                  </select>
		                  {% else %}
		                  {{contact_form.account}}
		                  {% endif %}
		                  <span class="error">{{ contact_form.account.errors }}</span>
		                </div>
		              </div>
		              <div class="filter_col col-md-12">
		                <div class="form-group ">
		                  <label for="exampleInputEmail1" class="required" >Phone{% if contact_form.phone.field.required %}<span class="error">*</span>{% endif %}</label>
		                  {{ contact_form.phone }}
		                  <span class="error">{{ contact_form.phone.errors }}</span>
		                </div>
		              </div>
		              <div class="filter_col col-md-12">
		                <div class="form-group ">
		                  <label for="exampleInputEmail1" class="required" >Email Address{% if contact_form.email.field.required %}<span class="error">*</span>{% endif %}</label>
		                  {{ contact_form.email }}
		                  <span class="error">{{ contact_form.email.errors }}</span>
		                </div>
		              </div>
		            </div>
		            <div class="col-md-4">
		              <div class="filter_col col-12">
		                <div class="form-group">
		                  <label for="exampleInputEmail1">Assigned Users</label>
		                  <select class="assigned_users form-control" name="assigned_to" multiple="multiple">
		                  {% for user in users %}
		                  <option value="{{user.id}}" {% if user in contact_obj.assigned_to.all or user.id in assignedto_list %} selected="" {% endif %}>{{user.email}}</option>
		                  {% endfor %}
		                  </select>
		                  <span class="error">{{ contact_form.assigned_to.errors }}</span>
		                </div>
		              </div>
		              <div class="filter_col col-md-12">
		                <div class="form-group">
		                  <label for="exampleInputEmail1">Address</label>
		                  {{ address_form.address_line }}
		                  <span class="error">{{ address_form.address_line.errors }}</span>
		                </div>
		                {{ address_form.street }}
		                <span class="error">{{ address_form.street.errors }}</span>
		                <div class="row" style="margin-top: 10px;">
		                  <div class="col-md-4">
		                    {{ address_form.city }}
		                    {{ address_form.city.errors }}
		                  </div>
		                  <div class="col-md-4">
		                    {{ address_form.state }}
		                    <span class="error">{{ address_form.state.errors }}</span>
		                  </div>
		                  <div class="col-md-4">
		                    {{ address_form.postcode }}
		                    <span class="error">{{ address_form.postcode.errors }}</span>
		                  </div>
		                  <div class="col-md-12" style="margin-top: 10px;">
		                    {{ address_form.country }}
		                    <span class="error">{{ address_form.country.errors }}</span>
		                  </div>
		                </div>
		              </div>
		            </div>
		            <div class="col-md-4">
		              <div class="col-md-12">
		                <div class="form-group">
		                  <label for="exampleInputEmail1">Description{% if contact_form.description.field.required %}<span class="error">*</span>{% endif %}</label>
		                  {{ contact_form.description }}
		                  <span class="error">{{ contact_form.description.errors }}</span>
		                </div>
		              </div>
		            </div>
		            <input type="hidden" name="from_account" value="{{request.GET.view_account}}">
		              {% if request.GET.view_account %}
		                <input type="hidden" name="account" value="{{request.GET.view_account}}">
		              {% endif %}

		            <input type="hidden" id="save_new_form" name="savenewform">
		            <div class="col-md-12">
		              <div class="row marl buttons_row text-center form_btn_row">
		                <button  class="btn btn-default save" type="submit">Save</button>
		                {% if not contact_obj %}
		                <button class="btn btn-success save savenew" type="submit">Save & New</button>
		                {% endif %}
		                <a {% if request.GET.view_account %} href="{% url 'accounts:view_account' request.GET.view_account %}" {% else %} href="{% url 'contacts:list' %}" {% endif %} class="btn btn-default clear" id="create_contact_cancel">Cancel</a>
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
		  </div>
		</form>
	  </div>  
	</div>
</div>
{% endblock %}